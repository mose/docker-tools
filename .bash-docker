#!/bin/bash

container_ip() {
  docker inspect -f '{{.NetworkSettings.IPAddress}}' $1
}

docker_clean() {
  docker ps -a | grep 'Exit' | awk '{print $1}' | while read -r id ;do
    docker rm $id
  done
  docker images | grep '^<none>' | awk 'BEGIN { FS = "[ \t]+" } { print $3 }'  | while read -r id ; do
    docker rmi $id
  done
}

docker_tools() {
  echo "Usage:"
  echo "  d_ip <container> : spits the IP of a given container"
  echo "                     <container> can be a hash or a name"
  echo "  d_clean          : cleans transitory images when a build fails"
}

alias d_ip=container_ip
alias d_clean=docker_clean

alias docker-tools=docker_tools
